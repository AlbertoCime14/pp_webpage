<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head><!-- Styles -->
<style>
#chartdiv {
  width: 100%;
  height: 700px;
}

</style>

<!-- Resources -->
<script src="../../../core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Chart code -->


<!-- HTML -->

<body>
    <div id="chartdiv"></div>

</body>

<script>
// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end


var chart = am4core.create("chartdiv", am4charts.XYChart);

chart.data = [{
        "organismo": "Legislativo",
        "participa": 0.74,
        "transp": 0.77,
        "gobierno": 0.75
    }, {
        "organismo": "Judicial",
        "participa": 0.56,
        "transp": 0.92,
        "gobierno": 0.74
    }, {
        "organismo": "Universidad",
        "participa": 0.41,
        "transp": 0.84,
        "gobierno": 0.63
    }, {
        "organismo": "Descentralizado",
        "participa": 0.46,
        "transp": 0.78,
        "gobierno": 0.62
    }, {
        "organismo": "Autónomo",
        "participa": 0.35,
        "transp": 0.81,
        "gobierno": 0.58
    },{
        "organismo": "Ejecutivo",
        "participa": 0.37,
        "transp": 0.75,
        "gobierno": 0.56
    }, {
        "organismo": "Partido Político",
        "participa": 0.32,
        "transp": 0.58,
        "gobierno": 0.45
    }, {
        "organismo": "Municipio",
        "participa": 0.19,
        "transp": 0.48,
        "gobierno": 0.34
    }, {
        "organismo": "Fideicomiso",
        "participa": 0.17,
        "transp": 0.46,
        "gobierno": 0.31
    }, {
        "organismo": "Sindicato",
        "participa": 0.53,
        "transp": 0.00,
        "gobierno": 0.27
    }];

//create category axis for years
var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.dataFields.category = "organismo";
categoryAxis.renderer.inversed = true;
categoryAxis.renderer.grid.template.location = 0;

//create value axis for income and gobierno
var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
valueAxis.renderer.opposite = true;

function createSeries(field, name, color) {
    //create columns
    var series = chart.series.push(new am4charts.ColumnSeries());
    series.dataFields.categoryX = "organismo";
    series.dataFields.valueY = field;
    series.name = "Participación";
    series.columns.template.fill = am4core.color(color);
    series.columns.template.strokeOpacity = 0;
    series.tooltipText = name + "{valueY.value}";


    var valueLabel = series.bullets.push(new am4charts.LabelBullet());
    valueLabel.label.text = "{valueY}";
    valueLabel.label.labelColor = am4core.color('#fff');
    valueLabel.label.dy = -10;
    //valueLabel.label.rotation = -90
    valueLabel.label.hideOversized = false;
    valueLabel.label.truncate = false;
}

createSeries("participa", "Participación", "#4E8994");
createSeries("transp", "Transparencia", "#8CBCC5");



//create line
var lineSeries = chart.series.push(new am4charts.LineSeries());
lineSeries.dataFields.categoryX = "organismo";
lineSeries.dataFields.valueY = "gobierno";
lineSeries.name = "Gobierno abierto";
lineSeries.strokeWidth = 3;
lineSeries.stroke = am4core.color('#6DA9B4');
lineSeries.tooltipText = "Gobierno abierto en {categoryX}: {valueY.value}";
lineSeries.tooltip

//add bullets
var circleBullet = lineSeries.bullets.push(new am4charts.CircleBullet());
circleBullet.circle.fill = am4core.color("#fff");
circleBullet.circle.strokeWidth = 1;




var valueLabel = lineSeries.bullets.push(new am4charts.LabelBullet());
valueLabel.label.text = "{valueY}";
valueLabel.label.labelColor = am4core.color('#6DA9B4');
valueLabel.label.dy = -15;
//valueLabel.label.rotation = -90
valueLabel.label.hideOversized = false;
valueLabel.label.truncate = false;

//add chart cursor
chart.cursor = new am4charts.XYCursor();
chart.cursor.behavior = "zoomY";

//add legend
chart.legend = new am4charts.Legend();
</script>
</html>
